{"remainingRequest":"E:\\GitHub\\basicFramework\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\GitHub\\basicFramework\\src\\views\\main\\header\\tag-module.vue?vue&type=style&index=1&lang=less&","dependencies":[{"path":"E:\\GitHub\\basicFramework\\src\\views\\main\\header\\tag-module.vue","mtime":1542089583544},{"path":"E:\\GitHub\\basicFramework\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"E:\\GitHub\\basicFramework\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"E:\\GitHub\\basicFramework\\node_modules\\postcss-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\GitHub\\basicFramework\\node_modules\\less-loader\\dist\\cjs.js","mtime":1534831455211},{"path":"E:\\GitHub\\basicFramework\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1534822204654},{"path":"E:\\GitHub\\basicFramework\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.tag-manage-dropdown{\n\t.ivu-select-dropdown{\n\t\tmargin-top: 8px !important;\n\t}\n}\n",{"version":3,"sources":["tag-module.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkDA;AACA;AACA;AACA;AACA","file":"tag-module.vue","sourceRoot":"src\\views\\main\\header","sourcesContent":["<style scoped lang=\"less\">\r\n\t.tag-box{\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tbackground: #ebebeb;\r\n\t\theight: 38px;\r\n\t\tline-height: 38px;\r\n\t\t.btnPublicStyle(){\r\n\t\t\tflex-shrink: 0;\r\n\t\t\theight: 37px;\r\n\t\t\twidth: 26px;\r\n\t\t\tbackground: #fff;\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t}\r\n\t\t.tag-left-btn{\r\n\t\t\t.btnPublicStyle();\r\n\t\t}\r\n\t\t.tag-right-btn{\r\n\t\t\t.btnPublicStyle();\r\n\t\t}\r\n\t\t.tag-manage{\r\n\t\t\tflex-shrink: 0;\r\n\t\t\theight: 37px;\r\n\t\t\twidth: 34px;\r\n\t\t\tbackground: #fff;\r\n\t\t\tmargin-left: 1px;\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t}\r\n\t\t.tag-content-box{\r\n\t\t\twidth: 100%;\r\n\t\t\toverflow: hidden;\r\n\t\t\t.tag-content-tagBtn-box{\r\n\t\t\t\twhite-space:nowrap;\r\n\t\t\t\tdisplay: inline-block;\r\n\t\t\t\tpadding-left: 4px;\r\n\t\t\t\ttransition: transform .3s;\r\n\t\t\t}\r\n\t\t}\r\n\t\t.tag-manage-dropdown{\r\n\t\t\tdisplay: flex;\r\n\t\t\t.tag-manage-dropdown-btn{\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</style>\r\n\r\n<style lang=\"less\">\r\n\t.tag-manage-dropdown{\r\n\t\t.ivu-select-dropdown{\r\n\t\t\tmargin-top: 8px !important;\r\n\t\t}\r\n\t}\r\n</style>\r\n\r\n<template>\r\n\r\n\t<div class=\"tag-box\">\r\n\t\t\r\n\t\t<div class=\"tag-left-btn\">\r\n\t\t\t<Button @click=\"leftBtn\" type=\"text\" style=\"padding: 0;width: 100%;height: 28px;float: left;\">\r\n\t\t\t\t<Icon size=\"20\" type=\"ios-arrow-back\" />\r\n\t\t\t</Button>\r\n\t\t</div>\r\n\t\t\r\n\t\t<div ref=\"tagContentBox\" class=\"tag-content-box\">\r\n\t\t\t\r\n\t\t\t<div ref=\"tagContentTagBtnBox\" class=\"tag-content-tagBtn-box\" :style=\"{transform: 'translateX('+offsetNum+'px)'}\">\r\n\t\t\t\t\r\n\t\t\t\t<template v-for=\"item in tagList\">\r\n\t\t\t\t\t<Tag\r\n\t\t\t\t\tref=\"tagInstance\"\r\n\t\t\t\t\ttype=\"dot\"\r\n\t\t\t\t\t:name=\"item.name\"\r\n\t\t\t\t\t:closable=\"item.name === 'home' ? false : true\"\r\n\t\t\t\t\t:fade=\"false\"\r\n\t\t\t\t\t@on-close=\"tagClose(item)\"\r\n\t\t\t\t\t@click.native=\"tagClick(item)\"\r\n\t\t\t\t\t:color=\"$route.name === item.name ? 'primary' : 'default'\">\r\n\t\t\t\t\t\t{{item.meta.title}}\r\n\t\t\t\t\t</Tag>\r\n\t\t\t\t</template>\r\n\t\t\t\t\r\n\t\t\t</div>\r\n\t\t\t\r\n\t\t</div>\r\n\t\t\r\n\t\t<div class=\"tag-right-btn\">\r\n\t\t\t<Button @click=\"rightBtn\" type=\"text\" style=\"padding: 0;width: 100%;height: 28px;float: right;\">\r\n\t\t\t\t<Icon size=\"20\" type=\"ios-arrow-forward\" />\r\n\t\t\t</Button>\r\n\t\t</div>\r\n\t\t\r\n\t\t<div class=\"tag-manage\">\r\n\t\t\t<Dropdown @on-click=\"handleClose\" placement=\"bottom-end\" class=\"tag-manage-dropdown\">\r\n\t\t        <div class=\"tag-manage-dropdown-btn\">\r\n\t           \t\t<Button type=\"text\" style=\"padding: 0;width: 33px;height: 28px;\">\r\n\t\t\t\t\t\t<Icon size=\"20\" type=\"ios-close-circle-outline\" />\r\n\t\t\t\t\t</Button>\r\n\t\t        </div>\r\n\t\t        <DropdownMenu slot=\"list\">\r\n\t\t            <DropdownItem name=\"other\">关闭其他</DropdownItem>\r\n\t\t            <DropdownItem name=\"all\">关闭全部</DropdownItem>\r\n\t\t        </DropdownMenu>\r\n\t\t    </Dropdown>\r\n\t\t</div>\r\n\t\t\r\n\t</div>\r\n\r\n</template>\r\n\r\n<script>\r\n\r\nimport { objEqual } from '@/toolBox';\r\n\r\nexport default {\r\n\tname: 'tagModule',\r\n\tcomponents: { //组件模板\r\n\t\t\r\n\t},\r\n\tprops: { //组件道具（参数）\r\n\t\t\r\n\t\ttagList: {\r\n\t\t\ttype: Array,\r\n\t\t\tdefault: () => []\r\n\t\t},\r\n\t\t\r\n\t},\r\n\tdata() { //数据\r\n\t\treturn {\r\n\t\t\t\r\n\t\t\toffsetNum: 0,//偏移量\r\n\t\t\t\r\n\t\t}\r\n\t},\r\n\tmethods: { //方法\r\n\t\t\r\n\t\ttagClose(current){//关闭当前标签\r\n\t\t\t\r\n\t\t\tlet currentTag = current;\r\n\t\t\t\r\n\t\t\tlet tagList = this.$store.state.app.tagNavList;\r\n\t\t\t\r\n\t\t\ttagList.forEach((item,index,rawArr) => {\r\n\t\t\t\t\r\n\t\t\t\tif(item.name === currentTag.name){\r\n\t\t\t\t\t\r\n\t\t\t\t\trawArr.splice(index,1);\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(item.name === this.$route.name){\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif(rawArr[index]){\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tthis.$router.push({\r\n\t\t\t\t\t    \t\tname: rawArr[index].name\r\n\t\t\t\t\t    \t});\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tthis.$router.push({\r\n\t\t\t\t\t    \t\tname: rawArr[index-1].name\r\n\t\t\t\t\t    \t});\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tthis.$store.commit('setTagNavList',tagList);\r\n\t\t\t\r\n\t\t\tthis.setTagOffset();//设置标签偏移量\r\n\t\t\t\r\n\t    },\r\n\t    \r\n\t    tagClick(current){//点击当前标签\r\n\t    \t\r\n\t    \tthis.$router.push({\r\n\t    \t\tname: current.name\r\n\t    \t});\r\n\t    \t\r\n\t    },\r\n\t    \r\n\t    handleClose(name){//标签管理按钮\r\n\t    \t\r\n\t    \tlet newTag = () => {\r\n\t    \t\t\r\n\t    \t\tlet tagList = this.$store.state.app.tagNavList;\r\n\t    \t\t\r\n\t    \t\tlet homeRoute = this.$store.state.app.homeRoute;\r\n\t    \t\t\r\n\t    \t\tlet res = [];\r\n\t    \t\r\n\t    \t\tif(name === 'other'){\r\n\t    \t\t\r\n\t    \t\t\tres = tagList.filter(item => {\r\n\t    \t\t\t\tif((item.name === homeRoute.name) || (item.name === this.$route.name) ) return item\r\n\t    \t\t\t});\r\n\t    \t\t\r\n\t    \t\t\treturn res;\r\n\t    \t\t\r\n\t    \t\t}else if(name === 'all'){\r\n\t    \t\t\r\n\t    \t\t\tres = tagList.filter(item => {\r\n\t    \t\t\t\tif(item.name === homeRoute.name) return item\r\n\t    \t\t\t});\r\n\t    \t\t\t\r\n\t    \t\t\tthis.$router.push({\r\n\t\t\t    \t\tname: homeRoute.name\r\n\t\t\t    \t});\r\n\t    \t\t\t\r\n\t    \t\t\treturn res;\r\n\t    \t\t\r\n\t    \t\t}\r\n\t    \t\t\r\n\t    \t}\r\n\t    \t\r\n\t    \tthis.$store.commit('setTagNavList',newTag());\r\n\t    \t\r\n\t    \tthis.setTagOffset();//设置标签偏移量\r\n\t    \t\r\n\t    },\r\n\t    \r\n\t    setTagOffset(){//设置标签偏移量\r\n\t    \t\r\n\t    \tsetTimeout(() => {\r\n\t\t\t\t\r\n\t\t\t\tlet mainBoxWidth = this.$refs.tagContentBox.offsetWidth;//主盒子的宽度\r\n\t\t\t\t\r\n\t\t\t\tlet currentTagLeft = 0;//从左侧到当前标签末端的总长度\r\n\t\t\t\t\r\n\t\t\t\tthis.$refs.tagInstance.forEach(item => {\r\n\t\t\t\t\tif(item.name == this.$route.name){\r\n\t\t\t\t\t\tcurrentTagLeft = (item.$el.offsetLeft + item.$el.offsetWidth) + 4;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tif(currentTagLeft > mainBoxWidth){\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.offsetNum = -(currentTagLeft - mainBoxWidth);\r\n\t\t\t\t\t\r\n\t\t\t\t}else{\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.offsetNum = 0;\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t},10);\r\n\t    \t\r\n\t\t},\r\n\t\t\r\n\t\tleftBtn(){//向左滑动\r\n\t\t\t\r\n\t\t\tthis.offsetNum += 200;\r\n\t\t\t\r\n\t\t\tif(this.offsetNum >= 0){\r\n\t\t\t\tthis.offsetNum = 0;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t},\r\n\t\t\r\n\t\trightBtn(){//向右滑动\r\n\t\t\t\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\t\r\n\t\t\t\tlet tagContentBox = this.$refs.tagContentBox.offsetWidth;\r\n\t\t\t\t\r\n\t\t\t\tlet tagContentTagBtnBox = this.$refs.tagContentTagBtnBox.offsetWidth;\r\n\t\t\t\t\r\n\t\t\t\tif(tagContentTagBtnBox > tagContentBox){\r\n\t\t\t\t\t\r\n\t\t\t\t\tlet maxOffset = -(tagContentTagBtnBox - tagContentBox);\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.offsetNum -= 200;\r\n\t\t\t\r\n\t\t\t\t\tif(this.offsetNum <= maxOffset){\r\n\t\t\t\t\t\tthis.offsetNum = maxOffset;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t},10);\r\n\t\t\t\r\n\t\t},\r\n\t    \r\n\t},\r\n\tcomputed: { //计算属性\r\n\t\t\r\n\t},\r\n\twatch: { //监测数据变化\r\n\t\t\r\n\t\t'$route'(to){\r\n\t\t\t\r\n\t\t\tthis.setTagOffset();//设置标签偏移量\r\n\t\t\t\r\n\t\t},\r\n\t\t\r\n\t},\r\n\r\n\t//===================组件钩子===========================\r\n\r\n\tcreated() { //实例被创建完毕之后执行\r\n\t\t\r\n\t\tthis.setTagOffset();//设置标签偏移量\r\n\t\t\r\n\t},\r\n\tmounted() { //模板被渲染完毕之后执行\r\n\t\t\r\n\t},\r\n\r\n}\r\n</script>"]}]}